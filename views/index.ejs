<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Home Page</title>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
    type="text/css" /> -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" />
    <link rel="stylesheet" href="/vendor/border-box.css" />
    <link rel="stylesheet" href="/styles/main.css" />
    <link rel="stylesheet" href="/styles/layout.css" />
    <link rel="stylesheet" href="/styles/nav.css" />
    <link rel="stylesheet" href="/styles/index.css" />
  

    <script src="/vendor/jquery-3.0.0.js"></script>
    <script defer src="/scripts/app.js"></script>
  </head>

  <body>
    <%- include('header') %>
    <header>
      <h1>Featured</h1>
    </header>
    <main>
      <h1>Listings</h1>
      <form action="/" method="POST">
        <label for="brand">Filter Listings by:</label>
        <input type="text" name="brand" placeholder="Enter a brand name" />
        <label for="">Select a price range:</label>
        <input
          type="text"
          name="minPrice"
          placeholder="Enter a minimum price"
        />
        <input
          type="text"
          name="maxPrice"
          placeholder="Enter a maximum price"
        />
        <button type="submit">Search</button>
      </form>
      <div class="listings">
        <%if (typeof errorMessage != "undefined") { %>
        <div style="color: red">Error listing info does not exist</div>
        <% } else { %> <% for (row of rows) { %>
        <div class="listing">
          <div class="listingHeader">
            <h2><%= row.brand %></h2>
            <% if (user) {%>
            <i class="fa-regular fa-star"></i>
            <% if (false) { %>
            <i class="fa-solid fa-star"></i>
            <% } }%>
          </div>
          <div class="upperLeftSide">
            <div class="imageContainer">
              <% if (row.sold) { %>
              <img src="<%= row.thumbnail_photo_url %>" />
              <img class="sold-stamp" src="/images/sold4.jpeg">
                <% } else { %>
              <img src="<%= row.thumbnail_photo_url %>" />

              <% } %>
            </div>
            <!-- <div class="upperRightSide">
            </div> -->
            <div class="middleOfListing">
              <div class="leftSideMiddleOfListing">
                <p>Year: <%= row.year %></p>
                <h2>Price: $<%= row.price %></h2>
              </div>
              <form method="GET" action="/<%= row.id %>">
                <input
                  class="viewListing"
                  type="submit"
                  value="Click here to view!"
                />
              </form>
            </div>
          </div>
          <div class="lowerLeftSide">
            <p>Description: <%= row.description %></p>
          </div>
        </div>
        <% } %> <% } %>
      </div>
    </main>
    <footer></footer>
  </body>
</html>
